# VibeGIS Generate Phase

Standalone Generate phase for creating widget files.

## Purpose

Generate the final widget files based on the workflow state.

## Prerequisites

Requires completed brief, PRD, and architecture. Check `.vibegis/session.json`.

## Instructions

1. Load session from `.vibegis/session.json`
2. Validate all phases are complete
3. Show generation summary:
   - Widget name and label
   - Files to generate
   - Integrations enabled
4. Ask for generation mode:
   - **Template** - Fast, predictable output using templates
   - **AI** - Production-ready widget.tsx generated by AI
5. Ask for output directory (default: current directory)
6. Generate files
7. Write files to output directory
8. Save session with generated code

## Generated Files

```
<output-dir>/<widget-name>/
├── manifest.json     - Widget metadata and dependencies
├── config.ts         - Configuration interface and defaults
├── runtime/
│   └── widget.tsx    - Main widget component
├── setting/
│   └── setting.tsx   - Settings panel (if configured)
└── translations/
    └── default.ts    - Localization strings
```

## Generation Modes

### Template Mode
Uses predefined templates with token replacement:
- `{{WIDGET_NAME}}` - Folder name
- `{{WIDGET_LABEL}}` - Display label
- `{{WIDGET_DESCRIPTION}}` - Description
- `{{COMPONENT_NAME}}` - PascalCase component name
- `{{JIMU_DEPENDENCIES}}` - Required modules
- `{{HAS_SETTINGS}}` - true/false

### AI Mode
Uses Claude to generate production-ready widget.tsx:
- Incorporates PRD requirements
- Uses architecture decisions
- Follows Jimu framework patterns
- Includes proper TypeScript types
- Other files still use templates

## Output

1. Widget files written to output directory
2. Session updated with:
   - `state.generatedCode` - Generated widget.tsx content
   - `state.currentPhase` - Set to "GENERATE"
   - `aiResponses.code` - AI-generated code (if AI mode)

## Example

```
Generation Summary:
- Widget: incident-tracker
- Label: Incident Tracker
- Files: 5
- Integrations: JimuMapView, DataSourceComponent

Generation mode? (template/ai): ai
Output directory? (.): ./widgets

Generating files...
✓ manifest.json
✓ config.ts
✓ runtime/widget.tsx (AI generated)
✓ setting/setting.tsx
✓ translations/default.ts

Widget generated at ./widgets/incident-tracker/
```
